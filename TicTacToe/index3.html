<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tic‑Tac‑Toe Web App</title>
<style>
  :root{
    --bg:#f8fafc;        
    --fg:#1e293b;        
    --accent:#0ea5e9;    
    --accent2:#94a3b8;   
    --win:#22c55e;       
    --lose:#ef4444;      
    --draw:#f59e0b;     
    --card:#ffffff;      
  }
  *{
    box-sizing:border-box;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",sans-serif;
  }
  body{
    margin:0;
    min-height:100vh;
    background:var(--bg);
    color:var(--fg);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  .app{
    width:100%;
    max-width:560px;
    background:var(--card);
    border-radius:18px;
    padding:24px 20px 32px;
    box-shadow:0 10px 30px rgba(0,0,0,.1);
  }
  h1{
    margin:0 0 12px;
    font-size:1.8rem;
    display:flex;
    gap:.5rem;
    align-items:center;
    justify-content:center;
  }
  h1 span{color:var(--accent)}
  .controls{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:space-between;
    margin-bottom:14px;
  }
  select, button{
    background:transparent;
    color:var(--fg);
    border:1.5px solid var(--accent2);
    padding:8px 12px;
    border-radius:10px;
    cursor:pointer;
    transition:.15s;
  }
  button:hover, select:hover{
    border-color:var(--accent);
    color:var(--accent);
  }
  .board{
    width:100%;
    aspect-ratio:1/1;
    display:grid;
    grid-template-columns:repeat(3,1fr);
    grid-template-rows:repeat(3,1fr);
    gap:8px;
    margin:16px 0;
  }
  .cell{
    background:#e2e8f0; 
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:3.2rem;
    font-weight:700;
    cursor:pointer;
    user-select:none;
    transition:background .1s, transform .05s;
  }
  .cell:active{transform:scale(.98)}
  .cell.disabled{pointer-events:none;opacity:.7}
  .cell.win{
    background:var(--win) !important;
    color:#fff;
  }
  .status{
    min-height:28px;
    text-align:center;
    font-weight:600;
    margin-bottom:10px;
  }
  .status.win{color:var(--win)}
  .status.lose{color:var(--lose)}
  .status.draw{color:var(--draw)}
  .scoreboard{
    display:flex;
    justify-content:space-around;
    padding:8px 0 16px;
    border-top:1px solid rgba(0,0,0,.06);
    border-bottom:1px solid rgba(0,0,0,.06);
    margin:12px 0 18px;
    font-weight:600;
  }
  .scoreboard div span{
    display:block;
    font-size:1.2rem;
    margin-top:4px;
    color:var(--accent);
  }
  footer{
    margin-top:12px;
    opacity:.7;
    font-size:.85rem;
    text-align:center;
  }
  @media (max-width:420px){
    .cell{font-size:2.4rem}
  }
</style>
</head>
<body>
  <div class="app">
    <h1><span>Tic‑Tac‑Toe</span> Web App</h1>

    <div class="controls">
      <label>
        Mode:
        <select id="mode">
          <option value="pvp">Player vs Player</option>
          <option value="easy">Player vs Computer (Easy)</option>
          <option value="impossible" selected>Player vs Computer (Impossible)</option>
        </select>
      </label>

      
      <label>
        First move:
        <select id="first">
          <option value="human" selected>Human (X)</option>
          <option value="computer">Computer (O)</option>
        </select>
      </label>

      <button id="newGameBtn">New Game</button>
      <button id="resetScoresBtn">Reset Scores</button>
    </div>

    <div id="status" class="status"></div>
    <div class="board" id="board"></div>
    <div class="scoreboard" id="scoreboard">
      <div>X Wins<span id="xWins">0</span></div>
      <div>O Wins<span id="oWins">0</span></div>
      <div>Draws<span id="draws">0</span></div>
    </div>

    <footer>Built with using HTML, CSS, and JS</footer>
  </div>

<script>
(function(){
  const boardEl = document.getElementById('board');
  const statusEl = document.getElementById('status');
  const newGameBtn = document.getElementById('newGameBtn');
  const resetScoresBtn = document.getElementById('resetScoresBtn');
  const modeEl = document.getElementById('mode');
  const firstEl = document.getElementById('first');
  const xWinsEl = document.getElementById('xWins');
  const oWinsEl = document.getElementById('oWins');
  const drawsEl = document.getElementById('draws');

  const X = 'X';
  const O = 'O';
  const WIN_LINES = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];

  let board = Array(9).fill(null);
  let currentPlayer = X;
  let gameOver = false;
  let scores = { X:0, O:0, D:0 };

  const cells = [];
  for (let i=0;i<9;i++){
    const c = document.createElement('div');
    c.className = 'cell';
    c.dataset.index = i;
    c.addEventListener('click', onCellClick);
    boardEl.appendChild(c);
    cells.push(c);
  }

  function onCellClick(e){
    const idx = +e.target.dataset.index;
    if (gameOver || board[idx]) return;
    
    if (modeEl.value !== 'pvp' && currentPlayer !== X) return;

    makeMove(idx, currentPlayer);
  }

  function makeMove(idx, player){
    board[idx] = player;
    cells[idx].textContent = player;
    cells[idx].classList.add('disabled');

    const result = evaluateBoard();
    if (result){
      handleEnd(result);
      return;
    }

    currentPlayer = (player === X) ? O : X;
    updateStatus();
    checkAIMove(); 
  }

  function checkAIMove(){
    if (gameOver) return;
    const mode = modeEl.value;
    if (mode === 'pvp') return;
    if (currentPlayer !== O) return; 
    setTimeout(computerMove, 120);
  }

  function computerMove(){
    if (gameOver) return;

    let move;
    if (modeEl.value === 'easy'){
      const available = board.map((v,i)=>v?null:i).filter(v=>v!==null);
      if (!available.length) return;
      move = available[Math.floor(Math.random()*available.length)];
    }else{
      const bm = bestMove(board.slice(), O);
      if (!bm || bm.index == null) return;
      move = bm.index;
    }
    makeMove(move, O);
  }

  function evaluateBoard(){
    for (const [a,b,c] of WIN_LINES){
      if (board[a] && board[a] === board[b] && board[a] === board[c]){
        return { winner: board[a], line:[a,b,c] };
      }
    }
    if (board.every(Boolean)) return { draw: true };
    return null;
  }

  function handleEnd(result){
    gameOver = true;
    if (result.winner){
      statusEl.textContent = `${result.winner} wins!`;
      statusEl.className = `status ${result.winner === X ? 'win' : 'lose'}`;
      scores[result.winner]++;
      result.line.forEach(i => cells[i].classList.add('win'));
    }else if (result.draw){
      statusEl.textContent = `It's a draw.`;
      statusEl.className = 'status draw';
      scores.D++;
    }
    updateScores();
    cells.forEach(c => c.classList.add('disabled'));
  }

  function updateScores(){
    xWinsEl.textContent = scores.X;
    oWinsEl.textContent = scores.O;
    drawsEl.textContent = scores.D;
  }

  function updateStatus(){
    statusEl.className = 'status';
    statusEl.textContent = `${currentPlayer}'s turn${modeEl.value !== 'pvp' && currentPlayer === O ? ' (Computer)' : ''}`;
  }

  function newGame(){
    board.fill(null);
    gameOver = false;

    
    const computerStarts = modeEl.value !== 'pvp' && firstEl.value === 'computer';
    currentPlayer = computerStarts ? O : X;

    cells.forEach(c => { c.textContent = ''; c.classList.remove('disabled','win'); });
    updateStatus();

    
    if (currentPlayer === O && modeEl.value !== 'pvp'){
      cells.forEach(c => c.classList.add('disabled'));
    }else{
      cells.forEach(c => c.classList.remove('disabled'));
    }

    checkAIMove(); 
  }

  function resetScores(){
    scores = { X:0, O:0, D:0 };
    updateScores();
    newGame();
  }

  
  function bestMove(state, player){
    const opponent = player === X ? O : X;
    const term = checkTerminal(state);
    if (term !== null){
      if (term === 'O') return { score: 10 };
      if (term === 'X') return { score: -10 };
      return { score: 0 };
    }
    const moves = [];
    for (let i=0;i<9;i++){
      if (!state[i]){
        const newState = state.slice();
        newState[i] = player;
        const res = bestMove(newState, opponent);
        moves.push({ index:i, score: res.score });
      }
    }
    if (player === O){
      let best = -Infinity, bestIndex = null;
      for (const m of moves){
        if (m.score > best){ best = m.score; bestIndex = m.index; }
      }
      return { index: bestIndex, score: best };
    }else{
      let best = Infinity, bestIndex = null;
      for (const m of moves){
        if (m.score < best){ best = m.score; bestIndex = m.index; }
      }
      return { index: bestIndex, score: best };
    }
  }

  function checkTerminal(state){
    for (const [a,b,c] of WIN_LINES){
      if (state[a] && state[a] === state[b] && state[a] === state[c]) return state[a];
    }
    if (state.every(Boolean)) return 'D';
    return null;
  }

  newGameBtn.addEventListener('click', newGame);
  resetScoresBtn.addEventListener('click', resetScores);
  modeEl.addEventListener('change', newGame);
  firstEl.addEventListener('change', newGame);

  updateScores();
  newGame(); // init
})();
</script>
</body>
</html>
